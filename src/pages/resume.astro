---
/**
 * Resume Page
 *
 * Spacetime-themed resume with toggle sections.
 * Uses resume-data.json for content.
 */

import BaseLayout from "../layouts/BaseLayout.astro";
import resumeData from "../data/resume-data.json";
---

<BaseLayout
  title="Resume"
  description="Resume of Aryan Singh - CS + BME at Johns Hopkins University"
>
  <div class="resume">
    <header class="resume__header">
      <h1 class="resume__name">{resumeData.name}</h1>
      <div class="resume__contact">
        <a href={`mailto:${resumeData.contact.email}`}
          >{resumeData.contact.email}</a
        >
        <span class="separator">·</span>
        <a href={`mailto:${resumeData.contact.emailJhu}`}
          >{resumeData.contact.emailJhu}</a
        >
        <span class="separator">·</span>
        <a
          href={`https://${resumeData.contact.github}`}
          target="_blank"
          rel="noopener">github</a
        >
        <span class="separator">·</span>
        <a
          href={`https://${resumeData.contact.linkedin}`}
          target="_blank"
          rel="noopener">linkedin</a
        >
      </div>
    </header>

    <!-- Education -->
    <section class="resume__section" data-section="education">
      <button class="section__toggle" aria-expanded="true">
        <h2 class="section__title">Education</h2>
        <span class="toggle-icon">−</span>
      </button>
      <div class="section__content">
        <div class="education-item">
          <div class="item-header">
            <strong>{resumeData.education.institution}</strong>
            <span class="date">{resumeData.education.dates}</span>
          </div>
          <div class="item-subheader">
            <span>{resumeData.education.degree}</span>
            <span class="location">{resumeData.education.location}</span>
          </div>
          <p class="gpa">GPA: {resumeData.education.gpa}</p>
          <ul class="details">
            <li>Minors: {resumeData.education.minors.join(", ")}</li>
            <li>Coursework: {resumeData.education.coursework.join(", ")}</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Experience -->
    <section class="resume__section" data-section="experience">
      <button class="section__toggle" aria-expanded="true">
        <h2 class="section__title">Experience</h2>
        <span class="toggle-icon">−</span>
      </button>
      <div class="section__content">
        {
          resumeData.experience.map((exp) => (
            <div class="experience-item">
              <div class="item-header">
                <strong>{exp.company}</strong>
                <span class="date">{exp.dates}</span>
              </div>
              <div class="item-subheader">
                <span class="role">{exp.title}</span>
                <span class="location">{exp.location}</span>
              </div>
              <ul class="highlights">
                {exp.highlights.map((h) => (
                  <li>{h}</li>
                ))}
              </ul>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Projects -->
    <section class="resume__section" data-section="projects">
      <button class="section__toggle" aria-expanded="true">
        <h2 class="section__title">Projects</h2>
        <span class="toggle-icon">−</span>
      </button>
      <div class="section__content">
        {
          resumeData.projects.map((proj) => (
            <div class="project-item">
              <div class="item-header">
                <strong>{proj.name}</strong>
                <span class="tagline">{proj.tagline}</span>
              </div>
              <p class="description">{proj.description}</p>
              {proj.highlights && (
                <ul class="highlights">
                  {proj.highlights.map((h) => (
                    <li>{h}</li>
                  ))}
                </ul>
              )}
            </div>
          ))
        }
      </div>
    </section>

    <!-- Awards -->
    <section class="resume__section" data-section="awards">
      <button class="section__toggle" aria-expanded="true">
        <h2 class="section__title">Awards</h2>
        <span class="toggle-icon">−</span>
      </button>
      <div class="section__content">
        {
          resumeData.awards.map((award) => (
            <div class="award-item">
              <div class="item-header">
                <strong>{award.name}</strong>
                <span class="date">{award.date}</span>
              </div>
              <p class="achievement">{award.achievement}</p>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Leadership -->
    <section class="resume__section" data-section="leadership">
      <button class="section__toggle" aria-expanded="true">
        <h2 class="section__title">Leadership</h2>
        <span class="toggle-icon">−</span>
      </button>
      <div class="section__content">
        {
          resumeData.leadership.map((lead) => (
            <div class="leadership-item">
              <div class="item-header">
                <strong>{lead.organization}</strong>
                <span class="date">{lead.dates}</span>
              </div>
              <div class="item-subheader">
                <span class="role">{lead.role}</span>
              </div>
              <ul class="highlights">
                {lead.highlights.map((h) => (
                  <li>{h}</li>
                ))}
              </ul>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Skills -->
    <section class="resume__section" data-section="skills">
      <button class="section__toggle" aria-expanded="true">
        <h2 class="section__title">Skills</h2>
        <span class="toggle-icon">−</span>
      </button>
      <div class="section__content skills-grid">
        <div class="skill-category">
          <h3>Languages</h3>
          <p>{resumeData.skills.languages.join(", ")}</p>
        </div>
        <div class="skill-category">
          <h3>Full-Stack</h3>
          <p>{resumeData.skills.fullstack.join(", ")}</p>
        </div>
        <div class="skill-category">
          <h3>ML & Data</h3>
          <p>{resumeData.skills.ml.join(", ")}</p>
        </div>
        <div class="skill-category">
          <h3>Systems</h3>
          <p>{resumeData.skills.systems.join(", ")}</p>
        </div>
      </div>
    </section>
  </div>
</BaseLayout>

<style>
  .resume {
    max-width: 800px;
    margin: 0 auto;
    padding: var(--space-3xl) var(--space-xl);
  }

  .resume__header {
    text-align: center;
    margin-bottom: var(--space-3xl);
    padding-bottom: var(--space-xl);
    border-bottom: 1px solid var(--color-border);
  }

  .resume__name {
    font-family: var(--font-serif);
    font-size: var(--text-5xl);
    font-weight: 400;
    margin: 0 0 var(--space-md) 0;
  }

  .resume__contact {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: var(--space-md);
    color: var(--color-text-tertiary);
    font-size: var(--text-sm);
  }

  .resume__contact a {
    color: var(--color-accent-primary);
    text-decoration: none;
    transition: opacity var(--transition-fast);
  }

  .resume__contact a:hover {
    opacity: 0.7;
  }

  .separator {
    opacity: 0.5;
  }

  /* Sections */
  .resume__section {
    margin-bottom: var(--space-xl);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    overflow: hidden;
  }

  .section__toggle {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-lg);
    background: var(--color-bg-secondary);
    border: none;
    cursor: pointer;
    transition: background var(--transition-fast);
  }

  .section__toggle:hover {
    background: var(--color-bg-tertiary);
  }

  .section__title {
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-text-secondary);
    margin: 0;
  }

  .toggle-icon {
    font-size: var(--text-xl);
    color: var(--color-text-tertiary);
    font-weight: 300;
  }

  .section__content {
    padding: var(--space-lg);
    transition:
      max-height 0.3s ease,
      padding 0.3s ease;
    overflow: hidden;
  }

  .section__content.collapsed {
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
  }

  /* Items */
  .experience-item,
  .project-item,
  .education-item,
  .award-item,
  .leadership-item {
    margin-bottom: var(--space-xl);
  }

  .experience-item:last-child,
  .project-item:last-child,
  .award-item:last-child,
  .leadership-item:last-child {
    margin-bottom: 0;
  }

  .item-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    flex-wrap: wrap;
    gap: var(--space-sm);
    margin-bottom: var(--space-xs);
  }

  .item-header strong {
    color: var(--color-text-primary);
    font-size: var(--text-lg);
  }

  .date {
    font-size: var(--text-sm);
    color: var(--color-text-tertiary);
    font-family: var(--font-mono);
  }

  .item-subheader {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: var(--space-sm);
    margin-bottom: var(--space-sm);
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
  }

  .role {
    font-style: italic;
    color: var(--color-accent-primary);
  }

  .location {
    color: var(--color-text-tertiary);
  }

  .tagline {
    font-size: var(--text-sm);
    color: var(--color-text-tertiary);
  }

  .gpa {
    font-size: var(--text-sm);
    color: var(--color-accent-primary);
    margin: var(--space-xs) 0;
  }

  .description {
    color: var(--color-text-secondary);
    line-height: 1.6;
    margin-bottom: var(--space-sm);
  }

  .achievement {
    color: var(--color-text-secondary);
    font-size: var(--text-sm);
    margin: 0;
  }

  .highlights,
  .details {
    margin: 0;
    padding-left: var(--space-lg);
    color: var(--color-text-secondary);
    font-size: var(--text-sm);
    line-height: 1.8;
  }

  .highlights li,
  .details li {
    margin-bottom: var(--space-xs);
  }

  /* Skills Grid */
  .skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-lg);
  }

  .skill-category h3 {
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-accent-primary);
    margin: 0 0 var(--space-xs) 0;
  }

  .skill-category p {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    line-height: 1.6;
    margin: 0;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggles = document.querySelectorAll(".section__toggle");

    toggles.forEach((toggle) => {
      toggle.addEventListener("click", () => {
        const section = toggle.closest(".resume__section");
        const content = section?.querySelector(".section__content");
        const icon = toggle.querySelector(".toggle-icon");
        const isExpanded = toggle.getAttribute("aria-expanded") === "true";

        toggle.setAttribute("aria-expanded", (!isExpanded).toString());

        if (content) {
          content.classList.toggle("collapsed");
        }

        if (icon) {
          icon.textContent = isExpanded ? "+" : "−";
        }
      });
    });
  });
</script>
